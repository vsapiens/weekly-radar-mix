# Security Policy

## Supported Versions

Only the latest release on the `main` branch receives security fixes.

| Version | Supported |
|---|---|
| Latest (`main`) | Yes |
| Older tags | No |

---

## Reporting a Vulnerability

**Do not open a public GitHub Issue for security vulnerabilities.**

Please report security issues privately by emailing the maintainer or using [GitHub's private vulnerability reporting](https://docs.github.com/en/code-security/security-advisories/guidance-on-reporting-and-writing/privately-reporting-a-security-vulnerability) feature:

1. Go to the repository's **Security** tab.
2. Click **Report a vulnerability**.
3. Describe the issue, steps to reproduce, and potential impact.

You will receive a response within **7 days**. If the vulnerability is confirmed, a fix will be released and you will be credited in the changelog (unless you prefer to remain anonymous).

---

## Credential Hygiene

This project handles Spotify OAuth credentials. Follow these guidelines to keep your credentials safe:

### What to never commit

| File | Why |
|---|---|
| `.env` | Contains your Client ID and Client Secret |
| `.cache` | Contains a live Spotify OAuth access + refresh token |

Both are listed in `.gitignore`. Double-check before committing:

```bash
git status          # should not list .env or .cache
git diff --cached   # verify no credential data in staged changes
```

### GitHub Secrets

Store all credentials as **GitHub Actions Secrets**, never as plain-text variables in the workflow YAML:

- `SPOTIPY_CLIENT_ID`
- `SPOTIPY_CLIENT_SECRET`
- `SPOTIPY_REDIRECT_URI`
- `SPOTIPY_PLAYLIST_ID`
- `SPOTIFY_TOKEN_CACHE`

Secrets are masked in workflow logs automatically.

### Token scope

The OAuth token generated by `setup_token.py` uses the minimum required scope:

```
playlist-modify-private playlist-modify-public
```

It cannot read your Spotify listening history, follow/unfollow accounts, or access payment information. Keep the scope to this minimum â€” do not expand it unless a new feature explicitly requires it.

### Token rotation

If you believe your `SPOTIFY_TOKEN_CACHE` secret has been compromised:

1. Go to your [Spotify Developer Dashboard](https://developer.spotify.com/dashboard) and **revoke** your app's tokens.
2. Run `python setup_token.py` locally to generate a new token.
3. Update the `SPOTIFY_TOKEN_CACHE` secret in GitHub with the new JSON.
4. If your Client Secret was exposed, rotate it from the Spotify Dashboard as well.

### Dependency security

Keep dependencies up to date to receive security patches:

```bash
pip list --outdated
pip install --upgrade spotipy python-dotenv
```

Consider using [Dependabot](https://docs.github.com/en/code-security/dependabot) (free for public repos) to receive automated dependency update PRs.
